webpackJsonp([1],{"+ikK":function(t,e){},LfgW:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,s,n,o=a("Xxa5"),r=a.n(o),c=a("exGp"),l=a.n(c),u=a("mvHQ"),d=a.n(u),m=a("Dd8w"),p=a.n(m),v=a("7+uW"),h=a("NYxO"),g=a("//Fk"),f=a.n(g),b=(i=l()(r.a.mark(function t(e,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:33;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e()){t.next=5;break}return t.next=3,P(i);case 3:t.next=0;break;case 5:a();case 6:case"end":return t.stop()}},t,this)})),function(t,e){return i.apply(this,arguments)}),_=(s=l()(r.a.mark(function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:33;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("status"in e){t.next=5;break}return t.abrupt("return");case 5:if(null===e.status){t.next=7;break}throw e.status;case 7:return t.next=9,P(a);case 9:t.next=0;break;case 11:case"end":return t.stop()}},t,this)})),function(t){return s.apply(this,arguments)}),C=(n=l()(r.a.mark(function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:33;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("err"in e){t.next=5;break}return t.abrupt("return",e.data);case 5:if(null===e.err){t.next=7;break}throw e.err;case 7:return t.next=9,P(a);case 9:t.next=0;break;case 11:case"end":return t.stop()}},t,this)})),function(t){return n.apply(this,arguments)});function k(){this.status=null}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.data=t,this.err=null}function P(t){return new f.a(function(e,a){return setTimeout(e,t)})}k.prototype.success=function(){this.status=void 0,delete this.status},k.prototype.error=function(t){this.status=t},k.prototype.setStatus=function(t,e){t?this.success():this.error(e)},k.prototype.reset=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.status=null},y.prototype.success=function(t){this.data=t,this.err=void 0,delete this.err},y.prototype.error=function(t){this.err=t},y.prototype.setStatus=function(t,e){t?this.success(e):this.error(e)},y.prototype.reset=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.data=t,this.err=null};var x={Wait:P,WaitUntil:b,WaitValue:C,WaitObject:_,WaitedValue:y,WaitedObject:k},S={name:"Navbar",data:function(){return{isBurgerActive:!1,navColor:["inherit","inherit","inherit"]}},computed:p()({},Object(h.d)({permissionLevel:function(t){return t.account.permissionLevel},cart:function(t){return t.cart.products},minimumStockNoti:function(t){return t.notification.minimumStock},hideMinimumStock:function(t){return t.notification.hideMinimumStock},cartNoti:function(t){return t.notification.cart},cartsNoti:function(t){return t.notification.carts}})),methods:p()({},Object(h.c)({setMinimumStockNoti:"notification/minimumStock",setHideMinimumStock:"notification/hideMinimumStock",setCart:"cart/set",setCartsNoti:"notification/carts"}),{mouseOver:function(t){this.$set(this.navColor,t,"hsl(0, 0%, 4%, 13%)")},mouseLeave:function(t){this.$set(this.navColor,t,"inherit")},login:function(){window.location.href="/api/auth/login#"+this.$router.currentRoute.path},closeBurger:function(){this.isBurgerActive=!1},toggleBurger:function(){this.isBurgerActive=!this.isBurgerActive},checkMinimumStockNotEmpty:function(){var t=this;this.Get("/api/minimumStock/count",{cache:"reload"}).then(this.ResponseMatch(function(e){return e.json().then(function(e){0===e?t.setHideMinimumStock(!0):t.setHideMinimumStock(!1),setTimeout(t.checkMinimumStockNotEmpty,5e3)})},function(e){return setTimeout(t.checkMinimumStockNotEmpty,5e3)}))},hasNewMinimumStock:function(){var t=this;this.Get("/api/minimumStock/hasNew",{cache:"reload"}).then(this.ResponseMatch(function(e){return e.json().then(function(e){e&&(t.setMinimumStockNoti(!0),t.setHideMinimumStock(!1)),setTimeout(t.hasNewMinimumStock,5e3)})},function(e){return setTimeout(t.checkMinimumStockNotEmpty,5e3)}))},hasNewCarts:function(){var t=this;this.Get("/api/cart/hasNew",{cache:"reload"}).then(this.ResponseMatch(function(e){return e.json().then(function(e){e&&t.setCartsNoti(!0),setTimeout(t.hasNewCarts,5e3)})},function(e){return setTimeout(t.hasNewCarts,5e3)}))},updateClient:function(){var t=this;return l()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.WaitValue(t.permissionLevel);case 2:e.sent>1?(t.hasNewCarts(),t.hasNewMinimumStock(),t.checkMinimumStockNotEmpty()):null!==(a=sessionStorage.getItem("cart"))&&t.setCart(JSON.parse(a));case 4:case"end":return e.stop()}},e,t)}))()}}),created:function(){this.updateClient()}},A={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar is-fixed-top is-primary"},[a("div",{staticClass:"navbar-brand"},[a("a",{staticClass:"navbar-burger",class:{"is-active":t.isBurgerActive},staticStyle:{color:"white"},style:{"background-color":t.cartNoti||t.cartsNoti||t.minimumStockNoti?"hsl(348, 100%, 61%)":"inherit"},attrs:{role:"button"},on:{click:t.toggleBurger}},[a("span"),t._v(" "),a("span"),t._v(" "),a("span")])]),t._v(" "),a("div",{staticClass:"navbar-menu",class:{"is-active":t.isBurgerActive}},[a("div",{staticClass:"navbar-start"},[a("router-link",{staticClass:"navbar-item",attrs:{to:"/"},nativeOn:{click:function(e){return t.closeBurger(e)}}},[t._v("Home")]),t._v(" "),a("router-link",{staticClass:"navbar-item",attrs:{to:"/find"},nativeOn:{click:function(e){return t.closeBurger(e)}}},[t._v("Find")]),t._v(" "),t.permissionLevel.data>1?a("router-link",{staticClass:"navbar-item",attrs:{to:"/addProduct"},nativeOn:{click:function(e){return t.closeBurger(e)}}},[t._v("Add Product")]):t._e(),t._v(" "),t.permissionLevel.data>0?a("router-link",{staticClass:"navbar-item",style:{"background-color":t.cartsNoti?"hsl(348, 100%, 61%)":t.navColor[0]},attrs:{to:"/carts"},nativeOn:{mouseover:function(e){t.mouseOver(0)},mouseleave:function(e){t.mouseLeave(0)},click:function(e){return t.closeBurger(e)}}},[t._v("Carts")]):t._e(),t._v(" "),t.permissionLevel.data>2?a("router-link",{staticClass:"navbar-item",attrs:{to:"/employees"},nativeOn:{click:function(e){return t.closeBurger(e)}}},[t._v("Employees")]):t._e(),t._v(" "),t.permissionLevel.data<2?a("router-link",{staticClass:"navbar-item",attrs:{to:"/howTo"},nativeOn:{click:function(e){return t.closeBurger(e)}}},[t._v("How to")]):t._e(),t._v(" "),t.permissionLevel.data<2?a("router-link",{staticClass:"navbar-item",attrs:{to:"/about"},nativeOn:{click:function(e){return t.closeBurger(e)}}},[t._v("About")]):t._e()],1),t._v(" "),a("div",{staticClass:"navbar-end"},[1==t.permissionLevel.data&&t.cart.length>0?a("router-link",{staticClass:"navbar-item",style:{"background-color":t.cartNoti?"hsl(348, 100%, 61%)":t.navColor[1]},attrs:{to:"/cart"},nativeOn:{mouseover:function(e){t.mouseOver(1)},mouseleave:function(e){t.mouseLeave(1)},click:function(e){return t.closeBurger(e)}}},[t._v("Cart")]):t._e(),t._v(" "),1==t.permissionLevel.data?a("router-link",{staticClass:"navbar-item",attrs:{to:"/account"},nativeOn:{click:function(e){return t.closeBurger(e)}}},[t._v("Account")]):t._e(),t._v(" "),t.permissionLevel.data>2&&!t.hideMinimumStock?a("router-link",{staticClass:"navbar-item",style:{"background-color":t.minimumStockNoti?"hsl(348, 100%, 61%)":t.navColor[2]},attrs:{to:"/minimumStock"},nativeOn:{mouseover:function(e){t.mouseOver(2)},mouseleave:function(e){t.mouseLeave(2)},click:function(e){return t.closeBurger(e)}}},[t._v("Minimum Stock")]):t._e(),t._v(" "),t.permissionLevel.data>0?a("a",{staticClass:"navbar-item",attrs:{href:"/api/auth/logout"}},[t._m(0),t._v(" "),a("span",[t._v("Logout")])]):a("a",{staticClass:"navbar-item",on:{click:t.login}},[t._m(1),t._v(" "),a("span",[t._v("Login")])])],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-sign-out-alt"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-sign-in-alt"})])}]};var w=a("VU/8")(S,A,!1,function(t){a("LfgW")},null,null).exports,I={name:"Alert",computed:p()({},Object(h.d)({isActive:function(t){return t.alert.isActive},title:function(t){return t.alert.title}})),methods:p()({},Object(h.c)({close:"alert/close"}))},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal",class:{"is-active":t.isActive}},[a("div",{staticClass:"modal-background",on:{click:t.close}}),t._v(" "),a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[t._v(t._s(t.title))])]),t._v(" "),a("section",{staticClass:"modal-card-body"},[t._t("default")],2),t._v(" "),a("footer",{staticClass:"modal-card-foot"},[a("button",{staticClass:"button is-success",on:{click:t.close}},[t._v("OK")])])])])},staticRenderFns:[]},O={name:"App",components:{Navbar:w,Alert:a("VU/8")(I,N,!1,null,null,null).exports},computed:p()({},Object(h.d)({alertMsg:function(t){return t.alert.msg}})),methods:p()({},Object(h.b)({updateAccount:"account/update"})),created:function(){this.updateAccount(this)}},D={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Navbar"),this._v(" "),e("router-view"),this._v(" "),e("Alert",[this._v(this._s(this.alertMsg))])],1)},staticRenderFns:[]};var T=a("VU/8")(O,D,!1,function(t){a("vqTe")},null,null).exports,M=a("/ocq"),U={name:"Product",props:["id","name","price","amount","sold","imgUrl","date","updateFx"],data:function(){return{minute:0,hour:0,day:0,month:0,year:0}},methods:{updateClient:function(){var t=new Date(this.date);this.minute=t.getMinutes(),this.hour=t.getHours(),this.day=t.getDate(),this.month=t.getMonth()+1,this.year=t.getFullYear()}},created:function(){this.updateClient()}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"productCard",staticStyle:{"margin-right":"20px","margin-bottom":"20px"}},[a("a",{attrs:{href:"/#/productDetail/"+this.id}},[a("div",{staticClass:"card",staticStyle:{height:"100%",position:"relative"}},[a("p",{staticClass:"has-text-centered title is-4",staticStyle:{margin:"10px"}},[t._v(t._s(t.name))]),t._v(" "),a("div",{staticStyle:{height:"140px"}}),t._v(" "),a("div",{staticClass:"card-image productCard",staticStyle:{visibility:"hidden"}},[a("figure",{staticClass:"image is-4by3"},[a("img",{staticStyle:{"object-fit":"contain"},attrs:{src:t.imgUrl}})])]),t._v(" "),a("div",{staticClass:"card-image productCard",staticStyle:{position:"absolute",bottom:"140px"}},[a("figure",{staticClass:"image is-4by3"},[a("img",{staticStyle:{"object-fit":"contain"},attrs:{src:t.imgUrl}})])]),t._v(" "),a("div",{staticClass:"content productCard",staticStyle:{position:"absolute",bottom:"0"}},[a("table",{staticClass:"table is-bordered is-narrow"},[a("col",{attrs:{"max-width":"100%"}}),t._v(" "),a("col",{attrs:{width:"100%"}}),t._v(" "),a("tr",[a("td",{staticStyle:{"white-space":"nowrap"}},[t._v("Price (Bath)")]),t._v(" "),a("td",[t._v(t._s(t.price))])]),t._v(" "),a("tr",[a("td",[t._v("Amount")]),t._v(" "),a("td",[t._v(t._s(t.amount))])]),t._v(" "),a("tr",[a("td",[t._v("Sold")]),t._v(" "),a("td",[t._v(t._s(t.sold))])]),t._v(" "),a("tr",[a("td",[t._v("Date")]),t._v(" "),a("td",[t._v(t._s(t.day+"/"+t.month+"/"+t.year+" - "+t.hour+":"+(t.minute<10?"0"+t.minute:t.minute)))])])])])])])])},staticRenderFns:[]};var F={name:"Home",data:function(){return{title:"Newest",searchInput:"",tag:"",isTagIncludeAll:!0,itemPerPage:12,pageInput:"1",totalPage:1,products:[],onlyInStock:!1}},components:{Product:a("VU/8")(U,E,!1,function(t){a("+ikK")},null,null).exports},computed:p()({},Object(h.d)({currentSearch:function(t){return t.home.search},currentPage:function(t){return t.home.page},currentTags:function(t){return t.home.tags}})),methods:p()({},Object(h.c)({setCurrentSearch:"home/search",setCurrentPage:"home/page",setCurrentTags:"home/tags",addTagGlobal:"home/addTag",removeTagGlobal:"home/removeTag"}),{countPage:function(t){var e=this;this.Get("/api/product/count"+(void 0===t?"":"/"+t),{cache:"reload"}).then(this.ResponseMatch(function(t){return t.json().then(function(t){e.totalPage=Math.floor((t-1)/e.itemPerPage)+1,e.totalPage<1&&(e.totalPage=1)})}))},updateProducts:function(){var t=this,e=this.currentPage;if(this.pageInput=String(e),""===this.currentSearch&&0===this.currentTags.length)this.title="Newest",this.countPage(),this.Get("/api/product/newest"+(this.onlyInStock?"InStock":"")+"/"+(e-1)*this.itemPerPage+"/"+this.itemPerPage).then(this.ResponseMatch(function(a){return a.json().then(function(a){t.products=a,t.setCurrentPage(e)})}));else{this.title="Search";var a=(""===this.currentSearch?"":"name: "+this.currentSearch)+(0===this.currentTags.length?"":" tags: "+(this.isTagIncludeAll?"":"(")+this.currentTags.reduce(function(e,a){return e+(t.isTagIncludeAll?" ":" OR ")+a})+(this.isTagIncludeAll?"":")"))+(this.onlyInStock?" NOT amount: 0":"");this.countPage(a),this.PostJson("/api/product/search/",{queryString:a,offset:(e-1)*this.itemPerPage,limit:this.itemPerPage}).then(this.ResponseMatch(function(a){return a.json().then(function(a){t.products=a,t.setCurrentPage(e)})}))}},clearSearch:function(){this.searchInput="",this.onlyInStock=!1,this.search()},search:function(){var t=this.searchInput.replace(/[^\w|\s|"]/g," ").replace(/\s+/g," ").toLowerCase().trim();t===this.currentSearch?(this.setCurrentPage(Number(this.pageInput)),this.updateProducts()):(this.pageInput="1",this.setCurrentPage(1),this.setCurrentSearch(t),this.updateProducts()),this.searchInput=this.currentSearch},addTag:function(){this.ValidateAndAddTag(this.tag,this.currentTags,this.addTagGlobal),this.tag=""},removeTag:function(t){this.removeTagGlobal(t)},clearTags:function(){this.setCurrentTags([])},changeTagIncludeAll:function(t){this.isTagIncludeAll=t},previousPage:function(){this.setCurrentPage(this.currentPage-1),this.updateProducts()},nextPage:function(){this.setCurrentPage(this.currentPage+1),this.updateProducts()},validatePossitiveNumber:function(t){if(""===this[t])this[t]="1";else if("pageInput"===t){Number(this.pageInput)>this.totalPage&&(this.pageInput=String(this.totalPage))}},validatePossitiveNumberOnKeyup:function(t){this[t]=this.ValidatePossitiveNumberOnKeyup(this[t])},updateClient:function(){this.searchInput=this.currentSearch,this.pageInput="1",this.updateProducts()}}),created:function(){window.scrollTo(0,0),this.updateClient()}},R={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"box is-pinned"},[a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[t._m(0),t._v(" "),a("div",{staticClass:"level-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchInput,expression:"searchInput"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.searchInput},on:{input:function(e){e.target.composing||(t.searchInput=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"level-item"},[a("button",{staticClass:"button is-link",staticStyle:{"margin-right":"10px"},attrs:{type:"button"},on:{click:t.search}},[t._v("Search")]),t._v(" "),a("button",{staticClass:"button is-link",staticStyle:{"margin-right":"10px"},attrs:{type:"button"},on:{click:t.clearSearch}},[t._v("Clear")]),t._v(" "),a("label",{staticClass:"checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.onlyInStock,expression:"onlyInStock"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.onlyInStock)?t._i(t.onlyInStock,null)>-1:t.onlyInStock},on:{change:function(e){var a=t.onlyInStock,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=t._i(a,null);i.checked?n<0&&(t.onlyInStock=a.concat([null])):n>-1&&(t.onlyInStock=a.slice(0,n).concat(a.slice(n+1)))}else t.onlyInStock=s}}}),t._v("\n            Only in-stock\n          ")])])]),t._v(" "),a("div",{staticClass:"level-right"},[a("div",{staticClass:"level-item"},[a("label",{staticClass:"label",staticStyle:{"margin-right":"10px"}},[t._v("Page ("+t._s(t.totalPage)+")")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pageInput,expression:"pageInput"}],staticClass:"input",staticStyle:{"margin-right":"10px",width:"70px","text-align":"right"},attrs:{type:"text"},domProps:{value:t.pageInput},on:{keyup:function(e){t.validatePossitiveNumberOnKeyup("pageInput")},focusout:function(e){t.validatePossitiveNumber("pageInput")},input:function(e){e.target.composing||(t.pageInput=e.target.value)}}}),t._v(" "),a("button",{staticClass:"button is-link",staticStyle:{"margin-right":"10px"},attrs:{type:"button",disabled:1===t.currentPage},on:{click:t.previousPage}},[t._v("Previous")]),t._v(" "),a("button",{staticClass:"button is-link",staticStyle:{"margin-right":"10px"},attrs:{type:"button",disabled:t.currentPage===t.totalPage},on:{click:t.nextPage}},[t._v("Next")])])])])]),t._v(" "),a("div",{staticClass:"container",staticStyle:{"margin-lift":"10px","margin-right":"10px"}},[a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("label",{staticClass:"label",staticStyle:{"margin-left":"10px","margin-right":"10px"}},[t._v("Tag")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tag,expression:"tag"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.tag},on:{input:function(e){e.target.composing||(t.tag=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"level-item"},[a("button",{staticClass:"button is-link",staticStyle:{"margin-right":"10px"},attrs:{type:"button"},on:{click:t.addTag}},[t._v("Add")]),t._v(" "),a("button",{staticClass:"button is-link",staticStyle:{"margin-right":"10px"},attrs:{type:"button"},on:{click:t.clearTags}},[t._v("Clear")]),t._v(" "),a("div",{staticClass:"buttons has-addons"},[a("span",{staticClass:"button",class:{"is-info":t.isTagIncludeAll},on:{click:function(e){t.changeTagIncludeAll(!0)}}},[t._v("All")]),t._v(" "),a("span",{staticClass:"button",class:{"is-info":!t.isTagIncludeAll},on:{click:function(e){t.changeTagIncludeAll(!1)}}},[t._v("Exist")])])])])]),t._v(" "),a("div",{staticClass:"buttons"},t._l(t.currentTags,function(e,i){return a("span",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){t.removeTag(i)}}},[t._v(t._s(e))])}))]),t._v(" "),a("div",{staticClass:"section"},[a("h1",{staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),a("div",{staticStyle:{display:"flex","flex-wrap":"wrap"}},t._l(t.products,function(e,i){return a("Product",{key:i,attrs:{id:e.id,name:e.name,price:e.price,amount:e.amount,sold:e.sold,date:e.date,imgUrl:""===e.imgUrl?"https://vignette.wikia.nocookie.net/simpsons/images/6/60/No_Image_Available.png/revision/latest?cb=20170219125728":e.imgUrl,updateFx:t.updateProducts}})}))]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"level-item"},[e("label",{staticClass:"label"},[this._v("Name")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{align:"center"}},[e("button",{staticClass:"button is-link",staticStyle:{"margin-bottom":"20px"},attrs:{type:"button",onclick:"window.scrollTo(0, 0)"}},[this._v("Go to top")])])}]},L=a("VU/8")(F,R,!1,null,null,null).exports,$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[t._m(0),t._v(" "),a("div",{staticClass:"level-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.productId,expression:"productId"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.productId},on:{input:function(e){e.target.composing||(t.productId=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"level-item"},[a("button",{staticClass:"button is-link",attrs:{type:"button"},on:{click:t.find}},[t._v("Find")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"level-item"},[e("label",{staticClass:"label"},[this._v("Product ID")])])}]},j=a("VU/8")({name:"Find",data:function(){return{productId:""}},methods:{find:function(){this.$router.replace("/productDetail/"+this.productId)}}},$,!1,null,null,null).exports,V={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"section"},[a("div",{staticClass:"hero-body"},[a("div",{staticClass:"container"},[a("h1",{staticClass:"title"},[t._v("Online Shop")]),t._v(" "),a("p"),a("h2",{staticClass:"subtitle"},[t._v("Tel : 02-000-0000")]),t._v(" "),a("p"),t._v(" "),a("p"),a("h2",{staticClass:"subtitle"},[t._v("Email : online-shop@mail.com")]),t._v(" "),a("p"),t._v(" "),a("p"),a("h2",{staticClass:"subtitle"},[t._v("Address : 1 Street District Province Postcode")]),t._v(" "),a("p")])])])}]},B=a("VU/8")({name:"About",created:function(){this.ChangeRouteIfPermissionLevel(function(t){return t>1})}},V,!1,null,null,null).exports,G={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"section"},[a("div",{staticClass:"hero-body"},[a("div",{staticClass:"container"},[a("h1",{staticClass:"title"},[t._v("How to buy products")]),t._v(" "),a("ol",[a("li",{staticClass:"subtitle"},[t._v("Sign-in")]),t._v(" "),a("li",{staticClass:"subtitle"},[t._v("Search for product")]),t._v(" "),a("li",{staticClass:"subtitle"},[t._v("Select the product")]),t._v(" "),a("li",{staticClass:"subtitle"},[t._v("Add product to cart")]),t._v(" "),a("li",{staticClass:"subtitle"},[t._v("Fill shipping address form")]),t._v(" "),a("li",{staticClass:"subtitle"},[t._v("Confirm the cart")]),t._v(" "),a("li",{staticClass:"subtitle"},[t._v("Upload transfer bill image to cart")]),t._v(" "),a("li",{staticClass:"subtitle"},[t._v("Check is cart confirm")]),t._v(" "),a("ul",[a("li",{staticClass:"subtitle",staticStyle:{"margin-left":"30px"}},[t._v("If it’s not confirmed, please contact us")]),t._v(" "),a("li",{staticClass:"subtitle",staticStyle:{"margin-left":"30px"}},[t._v("If it’s confirmed, wait for a delivery")])])])])])])}]},W=a("VU/8")({name:"HowTo",created:function(){this.ChangeRouteIfPermissionLevel(function(t){return t>1})}},G,!1,null,null,null).exports,H={name:"AddProduct",data:function(){return{name:"",tag:"",tags:[],price:"0",amount:"0",sold:"0",minimumStock:"0",previewImgSrc:null,imgType:"",enabledSubmit:!0,date:0}},methods:p()({},Object(h.c)({alert:"alert/show"}),{resetForm:function(){this.name="",this.price="0",this.amount="0",this.sold="0",this.minimumStock="0",this.tag="",this.tags=[],this.removeImg()},onSelectedImg:function(t){var e=t.target.files[0];this.previewImgSrc=window.URL.createObjectURL(e),this.imgType=e.type},addTag:function(){var t=this;this.ValidateAndAddTag(this.tag,this.tags,function(e){return t.tags.push(e)}),this.tag=""},removeTag:function(t){this.tags.splice(t,1)},clearTags:function(){this.tags=null},addProduct:function(t){var e=this;if(this.enabledSubmit=!1,""===this.name)return this.alert({title:"Error",msg:"Please specify name"}),void(this.enabledSubmit=!0);var a=new FormData(addProductForm);a.append("date",0===this.date?0:new Date(this.date).getTime()),a.append("imageType",this.imgType),a.append("tags",0===this.tags.length?"":this.tags.reduce(function(t,e){return t+" "+e})),this.PostFormData("/api/product/add",a).then(this.ResponseMatch(function(t){return t.text().then(function(t){""==t?e.alert({title:"Failed",msg:"Fail to add new product"}):(e.alert({title:"Success",msg:"Submited : "+t}),e.resetForm()),e.enabledSubmit=!0})},function(t){e.alert({title:"Failed",msg:"Please try again"}),e.enabledSubmit=!0}))},removeImg:function(){this.previewImgSrc=null,this.imgType="",imageInput.value=null},validateNonNagativeNumber:function(t){this[t]=this.ValidateNonNagativeNumber(this[t])},updateClient:function(){this.ChangeRouteIfPermissionLevel(function(t){return t<2})}}),created:function(){window.scrollTo(0,0),this.updateClient()}},K={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"section",attrs:{id:"addProductForm"}},[a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Name")]),t._v(" "),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input",attrs:{name:"name",type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Price (Bath)")]),t._v(" "),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],staticClass:"input",attrs:{name:"price",type:"text"},domProps:{value:t.price},on:{keyup:function(e){t.validateNonNagativeNumber("price")},input:function(e){e.target.composing||(t.price=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Amount")]),t._v(" "),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],staticClass:"input",attrs:{name:"amount",type:"text"},domProps:{value:t.amount},on:{keyup:function(e){t.validateNonNagativeNumber("amount")},input:function(e){e.target.composing||(t.amount=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"box"},[a("div",{staticClass:"field"},[a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("label",{staticClass:"label",staticStyle:{"margin-right":"10px"}},[t._v("Tag")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tag,expression:"tag"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.tag},on:{input:function(e){e.target.composing||(t.tag=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"level-item"},[a("button",{staticClass:"button is-link",staticStyle:{"margin-right":"10px"},attrs:{type:"button"},on:{click:t.addTag}},[t._v("Add")]),t._v(" "),a("button",{staticClass:"button is-link",attrs:{type:"button"},on:{click:t.clearTags}},[t._v("Clear")])])])])]),t._v(" "),a("div",{staticClass:"field is-grouped is-grouped-multiline"},t._l(t.tags,function(e,i){return a("p",{staticClass:"control"},[a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){t.removeTag(i)}}},[t._v(t._s(e))])])}))]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Sold")]),t._v(" "),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.sold,expression:"sold"}],staticClass:"input",attrs:{name:"sold",type:"text"},domProps:{value:t.sold},on:{keyup:function(e){t.validateNonNagativeNumber("sold")},input:function(e){e.target.composing||(t.sold=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Minimum Stock")]),t._v(" "),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.minimumStock,expression:"minimumStock"}],staticClass:"input",attrs:{name:"minimumStock",type:"text"},domProps:{value:t.minimumStock},on:{keyup:function(e){t.validateNonNagativeNumber("minimumStock")},input:function(e){e.target.composing||(t.minimumStock=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Date")]),t._v(" "),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],staticClass:"input",attrs:{type:"date"},domProps:{value:t.date},on:{input:function(e){e.target.composing||(t.date=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"field"},[a("img",{staticStyle:{"max-width":"300px","max-height":"300px"},attrs:{src:t.previewImgSrc}})]),t._v(" "),a("div",{staticClass:"field"},[a("div",{staticClass:"file"},[a("label",{staticClass:"file-label"},[a("input",{staticClass:"file-input",attrs:{id:"imageInput",name:"image",type:"file",accept:"image/*"},on:{change:t.onSelectedImg}}),t._v(" "),t._m(1),t._v(" "),null!==t.previewImgSrc?a("button",{staticClass:"button is-danger",attrs:{type:"button"},on:{click:t.removeImg}},[t._v("Remove Image")]):t._e()])])]),t._v(" "),a("div",{staticClass:"field"},[a("button",{staticClass:"button is-link",attrs:{type:"button",disabled:!t.enabledSubmit},on:{click:t.addProduct}},[t._v("Submit")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"field"},[e("label",{staticClass:"label"},[this._v("Description")]),this._v(" "),e("div",{staticClass:"control"},[e("textarea",{staticClass:"textarea",attrs:{name:"description",form:"addProductForm"}})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"file-cta"},[e("span",{staticClass:"file-icon"},[e("i",{staticClass:"fas fa-upload"})]),this._v(" "),e("span",{staticClass:"file-label"},[this._v("Choose a file…")])])}]},J=a("VU/8")(H,K,!1,null,null,null).exports,Y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal",class:{"is-active":t.isActive}},[a("div",{staticClass:"modal-background",on:{click:t.onCancel}}),t._v(" "),a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[t._v(t._s(t.title))])]),t._v(" "),a("section",{staticClass:"modal-card-body"},[t._t("default")],2),t._v(" "),a("footer",{staticClass:"modal-card-foot"},[a("button",{staticClass:"button is-success",attrs:{disabled:t.disabledOk},on:{click:t.onOk}},[t._v("OK")]),t._v(" "),a("button",{staticClass:"button",on:{click:t.onCancel}},[t._v("Cancel")])])])])},staticRenderFns:[]},q=a("VU/8")({name:"OkCancelPopup",props:["isActive","title","onOk","onCancel","disabledOk"]},Y,!1,null,null,null).exports,z={name:"ProductDetailInfo",components:{OkCancelPopup:q},props:["id"],data:function(){return{buyAmount:{isActive:!1,input:"1"},hasData:!0,name:"",price:0,amount:0,imgUrl:"https://vignette.wikia.nocookie.net/simpsons/images/6/60/No_Image_Available.png/revision/latest?cb=20170219125728",sold:0,tags:[],description:"",date:0,minute:0,hour:0,day:0,month:0,year:0,disabledPopupOk:!1}},computed:p()({},Object(h.d)({permissionLevel:function(t){return t.account.permissionLevel},cart:function(t){return t.cart.products}})),methods:p()({},Object(h.c)({alert:"alert/show",setCart:"cart/set",addToCart:"cart/addItem",addAmountToCart:"cart/addAmount",setCartNoti:"notification/cart"}),{setCartSessionStorage:function(){sessionStorage.setItem("cart",d()(this.cart))},askBuyAmount:function(){this.buyAmount.isActive=!0,this.buyAmount.input="1"},updateCart:function(){if(0===this.cart.length){var t=sessionStorage.getItem("cart");null!==t&&this.setCart(JSON.parse(t))}},buyAmountOnOk:function(){this.disabledPopupOk=!0,this.updateCart();var t=Number(this.buyAmount.input);if(t>this.amount)return this.alert({title:"Failed",msg:"Not enough product"}),void(this.disabledPopupOk=!1);for(var e=!1,a=this.cart,i=this.cart.length,s=0;s<i;s++)if(a[s].id===this.id){if(a[s].amount+t>this.amount)return this.alert({title:"Failed",msg:"Not enough product"}),void(this.disabledPopupOk=!1);this.addAmountToCart({index:s,value:t}),this.setCartSessionStorage(),e=!0,this.buyAmount.isActive=!1;break}e||(this.addToCart({id:this.id,name:this.name,amount:t,maxAmount:this.amount,price:this.price}),this.setCartSessionStorage(),this.buyAmount.isActive=!1),this.setCartNoti(!0),this.disabledPopupOk=!1},buyAmountOnCancel:function(){this.buyAmount.isActive=!1},validateBuyAmountInputOnKeyup:function(){this.buyAmount.input=this.ValidatePossitiveNumberOnKeyup(this.buyAmount.input)},validateBuyAmountInput:function(){""===this.buyAmount.input&&(this.buyAmount.input="1")},updateClient:function(){var t=this;this.Get("/api/product/"+this.$route.params.productId.replace(/\s+/g,"")).then(this.ResponseMatch(function(e){return e.json().then(function(e){t.name=e.name,t.price=e.price,t.amount=e.amount,t.imgUrl=""===e.imgUrl?"https://vignette.wikia.nocookie.net/simpsons/images/6/60/No_Image_Available.png/revision/latest?cb=20170219125728":e.imgUrl,t.sold=e.sold,t.date=e.date;var a=e.tags.trim();t.tags=""===a?[]:a.split(/\s/),t.description=e.description;var i=new Date(e.date);t.minute=i.getMinutes(),t.hour=i.getHours(),t.day=i.getDate(),t.month=i.getMonth()+1,t.year=i.getFullYear()})},function(e){return t.hasData=!1}))}}),created:function(){window.scrollTo(0,0),this.updateClient()}},Z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("OkCancelPopup",{attrs:{isActive:t.buyAmount.isActive,title:"Add to cart",onOk:t.buyAmountOnOk,onCancel:t.buyAmountOnCancel,disabledOk:t.disabledPopupOk}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.buyAmount.input,expression:"buyAmount.input"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.buyAmount.input},on:{keyup:t.validateBuyAmountInputOnKeyup,focusout:t.validateBuyAmountInput,input:function(e){e.target.composing||t.$set(t.buyAmount,"input",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"box"},[t.hasData?a("div",[a("p",{staticClass:"has-text-centered title is-1"},[t._v(t._s(t.name))]),t._v(" "),a("img",{staticStyle:{display:"block","max-height":"400px",margin:"auto","margin-bottom":"20px"},attrs:{src:t.imgUrl}}),t._v(" "),a("table",{staticClass:"table is-bordered is-narrow"},[a("col",{attrs:{"max-width":"100%"}}),t._v(" "),a("col",{attrs:{width:"100%"}}),t._v(" "),a("tr",[a("td",[t._v("ID")]),t._v(" "),a("td",{staticStyle:{"word-break":"break-all"}},[t._v(t._s(t.id))])]),t._v(" "),a("tr",[a("td",{staticStyle:{"white-space":"nowrap"}},[t._v("Price (Bath)")]),t._v(" "),a("td",[t._v(t._s(t.price))])]),t._v(" "),a("tr",[a("td",[t._v("Amount")]),t._v(" "),a("td",[t._v(t._s(t.amount))])]),t._v(" "),a("tr",[a("td",[t._v("Sold")]),t._v(" "),a("td",[t._v(t._s(t.sold))])]),t._v(" "),a("tr",[a("td",[t._v("Date")]),t._v(" "),a("td",[t._v(t._s(t.day+"/"+t.month+"/"+t.year+" - "+t.hour+":"+(t.minute<10?"0"+t.minute:t.minute)))])])]),t._v(" "),a("div",{staticClass:"box"},[a("p",{staticClass:"subtitle"},[t._v("Tags")]),t._v(" "),a("div",{staticClass:"tags"},t._l(t.tags,function(e){return a("span",{staticClass:"tag is-medium is-info"},[t._v(t._s(e))])}))]),t._v(" "),a("div",{staticClass:"box"},[a("p",{staticClass:"subtitle"},[t._v("Description")]),t._v(" "),a("div",{domProps:{innerHTML:t._s(t.description)}})]),t._v(" "),1===t.permissionLevel.data?a("button",{staticClass:"button is-link",attrs:{type:"button"},on:{click:t.askBuyAmount}},[t._v("Add to cart")]):t._e()]):a("p",{staticClass:"has-text-centered title is-1"},[t._v("Product not found")])])],1)},staticRenderFns:[]},Q=a("VU/8")(z,Z,!1,null,null,null).exports,X={name:"ProductDetailEdit",components:{OkCancelPopup:q},props:["id"],data:function(){return{popup:{isActive:!1,title:"Warning !",body:"",onOk:function(){}},changeAmountData:{title:"",isActive:!1,onOk:function(){},input:"0"},hasData:!0,name:"",price:"0",amount:"0",imgUrl:"",minimumStock:"0",sold:"0",tag:"",tags:[],description:"",date:0,previewImgSrc:"",imgType:"",newDate:0,minute:0,hour:0,day:0,month:0,year:0,updatedTime:-1,enabledUpdate:!0,disabledChangeAmountPopupOk:!1,disabledPopupOk:!1}},methods:p()({},Object(h.c)({alert:"alert/show"}),{addAmount:function(){var t=this;this.disabledChangeAmountPopupOk=!0;var e=Number(this.changeAmountData.input);this.PostJson("/api/product/addAmount/"+this.id,e).then(this.ResponseMatch(function(e){t.changeAmountData.isActive=!1,t.alert({title:"Success",msg:"Amount Updated"}),t.updateClient(),t.disabledChangeAmountPopupOk=!1},function(e){return t.disabledChangeAmountPopupOk=!1}))},subtractAmount:function(){var t=this;this.disabledChangeAmountPopupOk=!0;var e=-Number(this.changeAmountData.input);this.PostJson("/api/product/addAmount/"+this.id,e).then(this.ResponseMatch(function(e){return e.json().then(function(e){t.changeAmountData.isActive=!1,0==e?t.alert({title:"Success",msg:"Amount Updated"}):1==e&&t.alert({title:"Failed",msg:"Amount is least than zero"}),t.updateClient(),t.disabledChangeAmountPopupOk=!1})},function(e){return t.disabledChangeAmountPopupOk=!1}))},askAddAmount:function(){var t=this.changeAmountData;t.title="Add Amount",t.input="0",t.onOk=this.addAmount,t.isActive=!0},askSubtractAmount:function(){var t=this.changeAmountData;t.title="Subtract Amount",t.input="0",t.onOk=this.subtractAmount,t.isActive=!0},popupOnCancel:function(){this.popup.isActive=!1},changeAmountOnCancel:function(){this.changeAmountData.isActive=!1},refreshData:function(){this.popup.isActive=!1,this.updateClient()},askRefreshData:function(){var t=this.popup;t.body="Do you want to refresh the data.",t.onOk=this.refreshData,t.isActive=!0},remove:function(){var t=this;this.disabledPopupOk=!0,this.DeleteText("/api/product/delete",this.id).then(this.ResponseMatch(function(e){return t.$router.replace("/")},function(e){t.alert({title:"Failed",msg:"Please try again"}),t.disabledPopupOk=!1}))},askRemove:function(){var t=this.popup;t.body="Do you want to remove this product.",t.onOk=this.remove,t.isActive=!0},onSelectedImg:function(t){var e=t.target.files[0];this.fileName=e.name,this.previewImgSrc=window.URL.createObjectURL(e),this.imgType=e.type},addTag:function(){var t=this;this.ValidateAndAddTag(this.tag,this.tags,function(e){return t.tags.push(e)}),this.tag=""},removeTag:function(t){this.tags.splice(t,1)},clearTags:function(){this.tags=null},removeImg:function(){this.previewImgSrc="",this.imgType="",imageInput.value=null},validateNonNagativeNumber:function(t){this[t]=this.ValidateNonNagativeNumber(this[t])},validateChangeAmountInput:function(){this.changeAmountData.input=this.ValidateNonNagativeNumber(this.changeAmountData.input)},updateDate:function(){var t=new Date(this.date);this.minute=t.getMinutes(),this.hour=t.getHours(),this.day=t.getDate(),this.month=t.getMonth()+1,this.year=t.getFullYear()},updateClient:function(){var t=this;this.ChangeRouteIfPermissionLevel(function(t){return t<2}),this.Get("/api/product/"+this.$route.params.productId.replace(/\s+/g,""),{cache:"reload"}).then(this.ResponseMatch(function(e){return e.json().then(function(e){t.name=e.name,t.price=String(e.price),t.amount=String(e.amount),t.imgUrl=e.imgUrl,t.previewImgSrc=e.imgUrl,t.minimumStock=String(e.minimumStock),t.sold=String(e.sold),t.date=e.date,t.updatedTime=e.updatedTime;var a=e.tags.trim();t.tags=""===a?[]:a.split(/\s/),t.description=e.description,t.updateDate()})},function(e){return t.hasData=!1}))},updateServer:function(){var t=this;if(this.enabledUpdate=!1,""===this.name)return this.alert({title:"Error",msg:"Please specify name"}),void(this.enabledUpdate=!0);var e=0!==this.newDate,a=e?new Date(this.newDate).getTime():this.date,i=new FormData(updateProductForm);i.append("id",this.id),i.append("tags",0===this.tags.length?"":this.tags.reduce(function(t,e){return t+" "+e})),i.append("isNewImg",this.previewImgSrc!==this.imgUrl),i.append("imageType",this.imgType),i.append("image",imageInput.value),i.append("isNewDate",e),i.append("date",a),i.append("lastUpdatedTime",this.updatedTime),this.PostFormData("/api/product/update",i).then(this.ResponseMatch(function(e){return e.json().then(function(e){e>=0?(t.updatedTime=e,t.newDate=0,t.date=a+(new Date).getTime()%864e5,t.updateDate(),t.alert({title:"Success",msg:"Updated"}),t.enabledUpdate=!0):(t.enabledUpdate=!0,t.alert({title:"Failed",msg:"Please refresh data"}))})}))}}),created:function(){window.scrollTo(0,0),this.updateClient()}},tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("OkCancelPopup",{attrs:{isActive:t.changeAmountData.isActive,title:t.changeAmountData.title,onOk:t.changeAmountData.onOk,onCancel:t.changeAmountOnCancel,disabledOk:t.disabledChangeAmountPopupOk}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.changeAmountData.input,expression:"changeAmountData.input"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.changeAmountData.input},on:{keyup:t.validateChangeAmountInput,input:function(e){e.target.composing||t.$set(t.changeAmountData,"input",e.target.value)}}})]),t._v(" "),a("OkCancelPopup",{attrs:{isActive:t.popup.isActive,title:t.popup.title,onOk:t.popup.onOk,onCancel:t.popupOnCancel,disabledOk:t.disabledPopupOk}},[a("p",[t._v(t._s(t.popup.body))])]),t._v(" "),t.hasData?a("form",{staticClass:"section",attrs:{id:"updateProductForm"}},[a("div",{staticClass:"field"},[a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("button",{staticClass:"button is-link",staticStyle:{"margin-right":"10px"},attrs:{type:"button"},on:{click:t.askAddAmount}},[t._v("Add Amount")]),t._v(" "),a("button",{staticClass:"button is-link",attrs:{type:"button"},on:{click:t.askSubtractAmount}},[t._v("Subtract Amount")])])])])]),t._v(" "),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("ID")]),t._v(" "),a("div",{staticClass:"control"},[a("p",[t._v(t._s(this.id))])])]),t._v(" "),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Name")]),t._v(" "),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input",attrs:{name:"name",type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Price (Bath)")]),t._v(" "),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],staticClass:"input",attrs:{name:"price",type:"text"},domProps:{value:t.price},on:{keyup:function(e){t.validateNonNagativeNumber("price")},input:function(e){e.target.composing||(t.price=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Amount")]),t._v(" "),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],staticClass:"input",attrs:{name:"amount",type:"text"},domProps:{value:t.amount},on:{keyup:function(e){t.validateNonNagativeNumber("amount")},input:function(e){e.target.composing||(t.amount=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"box"},[a("div",{staticClass:"field"},[a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("label",{staticClass:"label",staticStyle:{"margin-right":"10px"}},[t._v("Tag")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tag,expression:"tag"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.tag},on:{input:function(e){e.target.composing||(t.tag=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"level-item"},[a("button",{staticClass:"button is-link",staticStyle:{"margin-right":"10px"},attrs:{type:"button"},on:{click:t.addTag}},[t._v("Add")]),t._v(" "),a("button",{staticClass:"button is-link",attrs:{type:"button"},on:{click:t.clearTags}},[t._v("Clear")])])])])]),t._v(" "),a("div",{staticClass:"field is-grouped is-grouped-multiline"},t._l(t.tags,function(e,i){return a("p",{staticClass:"control"},[a("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){t.removeTag(i)}}},[t._v(t._s(e))])])}))]),t._v(" "),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Description")]),t._v(" "),a("div",{staticClass:"control"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"textarea",attrs:{name:"description",form:"updateProductForm"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Sold")]),t._v(" "),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.sold,expression:"sold"}],staticClass:"input",attrs:{name:"sold",type:"text"},domProps:{value:t.sold},on:{keyup:function(e){t.validateNonNagativeNumber("sold")},input:function(e){e.target.composing||(t.sold=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Minimum Stock")]),t._v(" "),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.minimumStock,expression:"minimumStock"}],staticClass:"input",attrs:{name:"minimumStock",type:"text"},domProps:{value:t.minimumStock},on:{keyup:function(e){t.validateNonNagativeNumber("minimumStock")},input:function(e){e.target.composing||(t.minimumStock=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"field"},[a("img",{staticStyle:{"max-width":"300px","max-height":"300px"},attrs:{src:t.previewImgSrc}})]),t._v(" "),a("div",{staticClass:"field"},[a("div",{staticClass:"file"},[a("label",{staticClass:"file-label"},[a("input",{staticClass:"file-input",attrs:{id:"imageInput",name:"image",type:"file",accept:"image/*"},on:{change:t.onSelectedImg}}),t._v(" "),t._m(0),t._v(" "),""!==t.previewImgSrc?a("button",{staticClass:"button is-danger",attrs:{type:"button"},on:{click:t.removeImg}},[t._v("Remove Image")]):t._e()])])]),t._v(" "),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Date")]),t._v(" "),a("div",{staticClass:"control"},[a("p",[t._v(t._s(t.day+"/"+t.month+"/"+t.year+" - "+t.hour+":"+(t.minute<10?"0"+t.minute:t.minute)))])])]),t._v(" "),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("New Date")]),t._v(" "),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newDate,expression:"newDate"}],staticClass:"input",attrs:{type:"date"},domProps:{value:t.newDate},on:{input:function(e){e.target.composing||(t.newDate=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"field"},[a("button",{staticClass:"button is-link",attrs:{type:"button",disabled:!t.enabledUpdate},on:{click:t.updateServer}},[t._v("Update")]),t._v(" "),a("button",{staticClass:"button is-info",attrs:{type:"button"},on:{click:t.askRefreshData}},[t._v("Refresh")]),t._v(" "),a("button",{staticClass:"button is-danger",attrs:{type:"button"},on:{click:t.askRemove}},[t._v("Remove")])])]):a("div",{staticClass:"box"},[a("p",{staticClass:"has-text-centered title is-1"},[t._v("Product not found")])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"file-cta"},[e("span",{staticClass:"file-icon"},[e("i",{staticClass:"fas fa-upload"})]),this._v(" "),e("span",{staticClass:"file-label"},[this._v("Choose a file…")])])}]},et={name:"ProductDetail",components:{ProductDetailInfo:Q,ProductDetailEdit:a("VU/8")(X,tt,!1,null,null,null).exports},computed:p()({},Object(h.d)({permissionLevel:function(t){return t.account.permissionLevel}}))},at={render:function(){var t=this.$createElement,e=this._self._c||t;return this.permissionLevel.data>1?e("ProductDetailEdit",{attrs:{id:this.$route.params.productId}}):e("ProductDetailInfo",{attrs:{id:this.$route.params.productId}})},staticRenderFns:[]},it=a("VU/8")(et,at,!1,null,null,null).exports,st={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[t._v(t._s(t.name))]),t._v(" "),a("td",[t._v(t._s(t.email))]),t._v(" "),a("td",[a("button",{staticClass:"button is-danger",attrs:{type:"button"},on:{click:t.remove}},[t._v("Remove")])])])},staticRenderFns:[]},nt={name:"Employees",data:function(){return{input:{email:"",name:""},employees:[]}},components:{Employee:a("VU/8")({name:"Employee",props:["name","email","updateFx"],methods:{remove:function(){this.DeleteText("/api/employee/delete",this.email).then(this.updateFx)}}},st,!1,null,null,null).exports},methods:p()({},Object(h.c)({alert:"alert/show"}),{updateInfo:function(){var t=this;this.Get("/api/employee/search").then(this.ResponseMatch(function(e){return e.json().then(function(e){return t.employees=e})}))},updateClient:function(){this.ChangeRouteIfPermissionLevel(function(t){return t<2}),this.updateInfo()},addEmployees:function(t){var e=this,a=this.input;this.IsEmailFormat(a.email)?this.PutJson("/api/employee/put",{email:a.email,name:a.name}).then(this.ResponseMatch(function(t){e.updateInfo(),a.email="",a.name=""}),this.ShowError):this.alert({title:"Error",msg:"Wrong email format"})}}),created:function(){window.scrollTo(0,0),this.updateClient()}},ot={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"box"},[a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("label",{staticClass:"label",staticStyle:{"margin-right":"10px"}},[t._v("Email")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.email,expression:"input.email"}],staticClass:"input",attrs:{type:"email"},domProps:{value:t.input.email},on:{input:function(e){e.target.composing||t.$set(t.input,"email",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"level-item"},[a("label",{staticClass:"label",staticStyle:{"margin-right":"10px"}},[t._v("Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.input.name,expression:"input.name"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.input.name},on:{input:function(e){e.target.composing||t.$set(t.input,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"level-item"},[a("button",{staticClass:"button is-link",attrs:{type:"button"},on:{click:t.addEmployees}},[t._v("Add/Edit")])])])])]),t._v(" "),a("div",{staticClass:"section",staticStyle:{"overflow-x":"auto"}},[a("table",{staticClass:"table is-fullwidth"},[t._m(0),t._v(" "),a("tbody",t._l(t.employees,function(e,i){return a("Employee",{key:i,attrs:{name:e.name,email:e.email,updateFx:t.updateClient}})}))])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{staticStyle:{width:"50%"}},[this._v("Name")]),this._v(" "),e("th",[this._v("Email")]),this._v(" "),e("th",{staticStyle:{width:"10px"}})])])}]},rt=a("VU/8")(nt,ot,!1,null,null,null).exports,ct={name:"Account",data:function(){return{disabled:!0,account:{name:"",phoneNumber:"",address:""}}},computed:p()({},Object(h.d)({accountInfo:function(t){return t.account.info}})),methods:p()({},Object(h.c)({setAccountInfo:"account/info",alert:"alert/show"}),{getJson:function(){var t=this.account;return{name:t.name,phoneNumber:t.phoneNumber,address:t.address}},setJson:function(t){var e=this.account;e.name=t.name,e.phoneNumber=t.phoneNumber,e.address=t.address},updateClient:function(){var t=this;return l()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.ChangeRouteIfPermissionLevel(function(t){return 1!=t}),e.next=3,x.WaitValue(t.accountInfo);case 3:a=e.sent,t.setJson(a),t.disabled=!1;case 6:case"end":return e.stop()}},e,t)}))()},updateServer:function(){var t=this,e=this.getJson();this.PutJson("/api/account/put",e).then(this.ResponseMatch(function(a){t.setAccountInfo({status:!0,value:e}),t.alert({title:"Success",msg:"Updated"})},function(e){return t.alert({title:"Error",msg:"Update Failed"})}))},validatePhoneNumber:function(){var t=this.account;t.phoneNumber=this.ValidatePhoneNumber(t.phoneNumber)}}),created:function(){this.updateClient()}},lt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"section"},[a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Name")]),t._v(" "),a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.account.name,expression:"account.name"}],staticClass:"input",attrs:{type:"text",disabled:t.disabled},domProps:{value:t.account.name},on:{input:function(e){e.target.composing||t.$set(t.account,"name",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Phone Number")]),t._v(" "),a("div",{staticClass:"control has-icons-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.account.phoneNumber,expression:"account.phoneNumber"}],staticClass:"input",attrs:{type:"tel",disabled:t.disabled},domProps:{value:t.account.phoneNumber},on:{focusout:t.validatePhoneNumber,input:function(e){e.target.composing||t.$set(t.account,"phoneNumber",e.target.value)}}}),t._v(" "),t._m(0)])]),t._v(" "),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Address")]),t._v(" "),a("div",{staticClass:"control"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.account.address,expression:"account.address"}],staticClass:"textarea",attrs:{name:"address",disabled:t.disabled},domProps:{value:t.account.address},on:{input:function(e){e.target.composing||t.$set(t.account,"address",e.target.value)}}})])]),t._v(" "),a("button",{staticClass:"button",attrs:{type:"button",disabled:t.disabled},on:{click:t.updateServer}},[t._v("Update")]),t._v(" "),a("button",{staticClass:"button",attrs:{type:"button"},on:{click:t.updateClient}},[t._v("Reset")])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon is-left"},[e("i",{staticClass:"fas fa-phone"})])}]},ut=a("VU/8")(ct,lt,!1,null,null,null).exports,dt={name:"Cart",data:function(){return{total:0,enableSubmit:!0,editAmountData:{isActive:!1,input:"0",index:0,maxAmount:0},isUsedDefaultAddress:!1,shippingAddress:"",disabledPopupOk:!1}},components:{OkCancelPopup:q},computed:p()({},Object(h.d)({accountInfo:function(t){return t.account.info},cart:function(t){return t.cart.products}})),methods:p()({},Object(h.c)({alert:"alert/show",setCart:"cart/set",setCartAmount:"cart/setAmount",removeItem:"cart/removeItem",setCartNoti:"notification/cart",setCartsNoti:"notification/carts"}),Object(h.b)({updateCartData:"cart/update"}),{usedDefaultAddress:function(){var t=this;return l()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.isUsedDefaultAddress=!0,e.next=3,x.WaitValue(t.accountInfo);case 3:a=e.sent,localStorage.setItem("usedDefaultAddress",""),t.shippingAddress=a.address;case 6:case"end":return e.stop()}},e,t)}))()},onClickCheckbox:function(){this.isUsedDefaultAddress?(this.checkboxInput=!1,this.isUsedDefaultAddress=!1,localStorage.removeItem("usedDefaultAddress")):this.usedDefaultAddress()},submit:function(){var t=this;return l()(r.a.mark(function e(){var a,i,s,n,o,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.enableSubmit=!1,""!==t.shippingAddress){e.next=5;break}return t.alert({title:"Failed",msg:"Address should not be empty"}),t.enableSubmit=!0,e.abrupt("return");case 5:for(a=t.cart,i=a.length,s=[],n=0;n<i;n++)o=a[n],s.push({productId:o.id,amount:o.amount});c={address:t.shippingAddress,totalPrice:t.total,products:s},t.PostJson("/api/cart/add",c).then(t.ResponseMatch(function(e){return e.json().then(function(e){e?(t.setCart([]),sessionStorage.removeItem("cart"),t.alert({title:"Success",msg:"Sended"}),t.setCartsNoti(!0),t.$router.replace("/")):t.alert({title:"Failed",msg:"Please refresh and try again"}),t.enableSubmit=!0})},function(e){return t.enableSubmit=!0}));case 11:case"end":return e.stop()}},e,t)}))()},editAmountOnOk:function(){var t=this;this.disabledPopupOk=!0;var e=this.editAmountData;this.setCartAmount({index:e.index,value:Number(e.input)}),sessionStorage.setItem("cart",d()(this.cart)),this.total=0,this.cart.forEach(function(e){return t.total+=e.price*e.amount}),e.isActive=!1,this.disabledPopupOk=!1},editAmountOnCancel:function(){this.editAmountData.isActive=!1},validateEditAmountOnKeyup:function(){this.editAmountData.input=this.ValidatePossitiveNumberOnKeyup(this.editAmountData.input)},validateEditAmount:function(){var t=this.editAmountData;""===t.input?t.input="1":Number(t.input)>t.maxAmount&&(t.input=String(t.maxAmount))},editAmount:function(t){var e=this.editAmountData,a=this.cart[t];e.index=t,e.input=String(a.amount>a.maxAmount?a.maxAmount:a.amount),e.maxAmount=a.maxAmount,e.isActive=!0},refreshData:function(){var t=this;this.updateCartData({self:this,onComplete:function(){0!==t.cart.length?(t.total=0,t.cart.forEach(function(e){return t.total+=e.price*e.amount})):(sessionStorage.removeItem("cart"),t.$router.replace("/"))}})},removeProduct:function(t){var e=this;this.cart[t].amount,this.cart[t].price;this.removeItem(t),0!==this.cart.length?(sessionStorage.setItem("cart",d()(this.cart)),this.total=0,this.cart.forEach(function(t){return e.total+=t.price*t.amount})):(sessionStorage.removeItem("cart"),this.$router.replace("/"))},updateClient:function(){var t=this;if(this.ChangeRouteIfPermissionLevel(function(t){return 1!==t}),this.setCartNoti(!1),""===localStorage.getItem("usedDefaultAddress")&&this.usedDefaultAddress(),0===this.cart.length){var e=sessionStorage.getItem("cart");null!==e?this.setCart(JSON.parse(e)):this.$router.replace("/")}this.total=0,this.cart.forEach(function(e){return t.total+=e.price*e.amount})}}),created:function(){window.scrollTo(0,0),this.updateClient()}},mt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("OkCancelPopup",{attrs:{isActive:t.editAmountData.isActive,title:"Edit Amount",onOk:t.editAmountOnOk,onCancel:t.editAmountOnCancel,disabledOk:t.disabledPopupOk}},[a("p",{staticStyle:{"margin-bottom":"10px"}},[t._v("Max Amount : "+t._s(t.editAmountData.maxAmount))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.editAmountData.input,expression:"editAmountData.input"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.editAmountData.input},on:{keyup:t.validateEditAmountOnKeyup,focusout:t.validateEditAmount,input:function(e){e.target.composing||t.$set(t.editAmountData,"input",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"box"},[t._l(t.cart,function(e,i){return a("div",{staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"box",staticStyle:{display:"flex","flex-wrap":"wrap","background-color":"hsl(0, 0%, 86%)"}},[a("div",{staticStyle:{"margin-right":"10px","margin-bottom":"10px","flex-grow":"1"}},[a("table",{staticClass:"table is-bordered is-narrow"},[a("col",{attrs:{"max-width":"100%"}}),t._v(" "),a("col",{attrs:{width:"100%"}}),t._v(" "),a("tr",[a("td",[t._v("ID")]),t._v(" "),a("td",{staticStyle:{"word-break":"break-all"}},[t._v(t._s(e.id))])]),t._v(" "),a("tr",[a("td",[t._v("Name")]),t._v(" "),a("td",[t._v(t._s(e.name))])]),t._v(" "),a("tr",[a("td",{staticStyle:{"white-space":"nowrap"}},[t._v("Price (Bath)")]),t._v(" "),a("td",[t._v(t._s(e.price))])]),t._v(" "),a("tr",[a("td",[t._v("Amount")]),t._v(" "),a("td",{style:{"background-color":e.amount>e.maxAmount?"hsl(348, 100%, 61%)":"inherit"},attrs:{title:e.amount>e.maxAmount?"Not enough product":""}},[t._v(t._s(e.amount))])]),t._v(" "),a("tr",[a("td",{staticStyle:{"white-space":"nowrap"}},[t._v("Total Price (Bath)")]),t._v(" "),a("td",[t._v(t._s(e.amount*e.price))])])])]),t._v(" "),a("div",[a("div",{staticClass:"inlineWhenMobile",attrs:{align:"center"}},[a("button",{staticClass:"button is-danger",staticStyle:{"margin-bottom":"10px",width:"83px"},attrs:{type:"button"},on:{click:function(e){t.removeProduct(i)}}},[t._v("Remove")])]),t._v(" "),a("div",{staticClass:"inlineWhenMobile",attrs:{align:"center"}},[a("button",{staticClass:"button is-info",staticStyle:{width:"83px"},attrs:{type:"button"},on:{click:function(e){t.editAmount(i)}}},[t._v("Edit")])])])])])}),t._v(" "),a("p",{staticClass:"title"},[t._v("Total : "+t._s(t.total))]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[a("p",{staticClass:"title"},[t._v("Shipping Address")]),t._v(" "),a("label",{staticClass:"checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isUsedDefaultAddress,expression:"isUsedDefaultAddress"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isUsedDefaultAddress)?t._i(t.isUsedDefaultAddress,null)>-1:t.isUsedDefaultAddress},on:{click:t.onClickCheckbox,change:function(e){var a=t.isUsedDefaultAddress,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=t._i(a,null);i.checked?n<0&&(t.isUsedDefaultAddress=a.concat([null])):n>-1&&(t.isUsedDefaultAddress=a.slice(0,n).concat(a.slice(n+1)))}else t.isUsedDefaultAddress=s}}}),t._v("\n        Use default address\n      ")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.shippingAddress,expression:"shippingAddress"}],staticClass:"textarea subtitle",attrs:{name:"address",disabled:t.isUsedDefaultAddress},domProps:{value:t.shippingAddress},on:{input:function(e){e.target.composing||(t.shippingAddress=e.target.value)}}})]),t._v(" "),a("div",{attrs:{align:"center"}},[a("button",{staticClass:"button is-link",attrs:{type:"button",disabled:!t.enableSubmit},on:{click:t.submit}},[t._v("Submit")]),t._v(" "),a("button",{staticClass:"button is-info",attrs:{type:"button"},on:{click:t.refreshData}},[t._v("Refresh")])])],2)],1)},staticRenderFns:[]};var pt=a("VU/8")(dt,mt,!1,function(t){a("oeVK")},null,null).exports,vt={name:"Cart",props:["mode","id","accountId","email","totalPrice","date","billImgUrl"],data:function(){return{minute:0,hour:0,day:0,month:0,year:0}},computed:p()({},Object(h.d)({permissionLevel:function(t){return t.account.permissionLevel}})),methods:{updateClient:function(){var t=new Date(this.date);this.minute=t.getMinutes(),this.hour=t.getHours(),this.day=t.getDate(),this.month=t.getMonth()+1,this.year=t.getFullYear()}},created:function(){this.updateClient()}},ht={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{attrs:{href:"/#/cartDetail/"+this.id}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"box",staticStyle:{display:"flex","flex-wrap":"wrap","justify-content":"center","background-color":"hsl(0, 0%, 86%)"}},[a("div",{staticStyle:{"margin-right":"10px","margin-bottom":"10px","flex-grow":"1"}},[a("table",{staticClass:"table is-bordered is-narrow"},[a("col",{attrs:{"max-width":"100%"}}),t._v(" "),a("col",{attrs:{width:"100%"}}),t._v(" "),a("tr",[a("td",[t._v("ID")]),t._v(" "),a("td",{staticStyle:{"word-break":"break-all"}},[t._v(t._s(t.id))])]),t._v(" "),t.permissionLevel.data>1?a("tr",[a("td",[t._v("Account")]),t._v(" "),a("td",{staticStyle:{"word-break":"break-all"}},[t._v(t._s(t.accountId))])]):t._e(),t._v(" "),t.permissionLevel.data>1?a("tr",[a("td",[t._v("Email")]),t._v(" "),a("td",[t._v(t._s(t.email))])]):t._e(),t._v(" "),a("tr",[a("td",{staticStyle:{"white-space":"nowrap"}},[t._v("Total Price (Bath)")]),t._v(" "),a("td",[t._v(t._s(t.totalPrice))])]),t._v(" "),a("tr",[a("td",[t._v("Date")]),t._v(" "),a("td",[t._v(t._s(t.day+"/"+t.month+"/"+t.year+" - "+t.hour+":"+(t.minute<10?"0"+t.minute:t.minute)))])])])]),t._v(" "),a("div",[a("p",{attrs:{align:"center"}},[t._v("Bill image")]),t._v(" "),a("img",{staticStyle:{"max-width":"300px","max-height":"145px"},attrs:{src:t.billImgUrl}})])])])])},staticRenderFns:[]},gt={name:"Carts",components:{CartElem:a("VU/8")(vt,ht,!1,null,null,null).exports},data:function(){return{carts:[],itemPerPage:10}},computed:p()({},Object(h.d)({permissionLevel:function(t){return t.account.permissionLevel},mode:function(t){return t.carts.mode},pageMode:function(t){return t.carts.pageMode}})),methods:p()({},Object(h.c)({setCartsNoti:"notification/carts",setMode:"carts/mode",setPageInput:"cart/pageInput",setTotalPage:"carts/totalPage",setCurrentPage:"carts/totalPage"}),{selectMode:function(t){this.mode!==t&&(this.setMode(t),this.updateClient())},refresh:function(){var t=this.mode;this.setCurrentPage({index:t,value:Number(this.pageMode[t].pageInput)}),this.updateClient()},previousPage:function(){var t=this.mode,e=this.pageMode[t];this.setCurrentPage({index:t,value:e.currentPage-1}),this.setPageInput({index:t,value:String(e.currentPage)}),this.updateClient()},nextPage:function(){var t=this.mode,e=this.pageMode[t];this.setCurrentPage({index:t,value:e.currentPage+1}),this.setPageInput({index:t,value:String(e.currentPage)}),this.updateClient()},validatePossitiveNumber:function(){var t=this.mode,e=this.pageMode[t];if(""===e.pageInput)this.setPageInput({index:t,value:"1"});else if("pageInput"===property){Number(e.pageInput)>e.totalPage&&this.setPageInput({index:t,value:String(e.totalPage)})}},validatePossitiveNumberOnKeyup:function(){var t=this.mode,e=this.pageMode[t];this.setPageInput({index:t,value:this.ValidatePossitiveNumberOnKeyup(e.pageInput)})},countPage:function(t){var e=this,a=this.mode;this.pageMode[a];this.Get("/api/cart/count"+t,{cache:"reload"}).then(this.ResponseMatch(function(t){return t.json().then(function(t){var i=Math.floor((t-1)/e.itemPerPage)+1;i<1?e.setTotalPage({index:a,value:1}):e.setTotalPage({index:a,value:i})})}))},updateClient:function(){var t=this;return l()(r.a.mark(function e(){var a,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.ChangeRouteIfPermissionLevel(function(t){return t<1}),t.setCartsNoti(!1),a=t.pageMode[t.mode],i="",e.t0=t.mode,e.next=0===e.t0?7:1===e.t0?9:2===e.t0?11:13;break;case 7:return i="Payment",e.abrupt("break",13);case 9:return i="Unconfirmed",e.abrupt("break",13);case 11:return i="Confirmed",e.abrupt("break",13);case 13:return e.next=15,x.WaitValue(t.permissionLevel);case 15:1==e.sent&&(i+="FromUser"),t.countPage(i),t.Get("/api/cart/search"+i+"/"+(a.currentPage-1)*t.itemPerPage+"/"+t.itemPerPage).then(t.ResponseMatch(function(e){return e.json().then(function(e){return t.carts=e})}));case 19:case"end":return e.stop()}},e,t)}))()}}),created:function(){window.scrollTo(0,0),this.updateClient()}},ft={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"box"},[a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("button",{staticClass:"button is-info",attrs:{type:"button"},on:{click:t.refresh}},[t._v("Refresh")])])]),t._v(" "),a("div",{staticClass:"level-right"},[a("div",{staticClass:"level-item"},[a("label",{staticClass:"label",staticStyle:{"margin-right":"10px"}},[t._v("Page ("+t._s(t.pageMode[t.mode].totalPage)+")")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pageMode[t.mode].pageInput,expression:"pageMode[mode].pageInput"}],staticClass:"input",staticStyle:{"margin-right":"10px",width:"70px","text-align":"right"},attrs:{type:"text"},domProps:{value:t.pageMode[t.mode].pageInput},on:{keyup:t.validatePossitiveNumberOnKeyup,focusout:t.validatePossitiveNumber,input:function(e){e.target.composing||t.$set(t.pageMode[t.mode],"pageInput",e.target.value)}}}),t._v(" "),a("button",{staticClass:"button is-link",staticStyle:{"margin-right":"10px"},attrs:{type:"button",disabled:1===t.pageMode[t.mode].currentPage},on:{click:t.previousPage}},[t._v("Previous")]),t._v(" "),a("button",{staticClass:"button is-link",staticStyle:{"margin-right":"10px"},attrs:{type:"button",disabled:t.pageMode[t.mode].currentPage===t.pageMode[t.mode].totalPage},on:{click:t.nextPage}},[t._v("Next")])])])])]),t._v(" "),a("div",{staticClass:"tabs is-centered"},[a("ul",[a("li",{class:{"is-active":0==t.mode},on:{click:function(e){t.selectMode(0)}}},[a("a",[t._v("Payment")])]),t._v(" "),a("li",{class:{"is-active":1==t.mode},on:{click:function(e){t.selectMode(1)}}},[a("a",[t._v("Unconfirmed")])]),t._v(" "),a("li",{class:{"is-active":2==t.mode},on:{click:function(e){t.selectMode(2)}}},[a("a",[t._v("Confirmed")])])])]),t._v(" "),a("div",{staticClass:"box"},[t._l(t.carts,function(e,i){return a("CartElem",{key:i,attrs:{mode:t.mode,id:e.id,accountId:e.accountId,email:e.email,totalPrice:e.totalPrice,confirm:e.confirm,date:e.date,billImgUrl:""===e.billImgUrl?"https://vignette.wikia.nocookie.net/simpsons/images/6/60/No_Image_Available.png/revision/latest?cb=20170219125728":e.billImgUrl}})}),t._v(" "),t._m(0)],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{align:"center"}},[e("button",{staticClass:"button is-link",staticStyle:{"margin-bottom":"20px"},attrs:{type:"button",onclick:"window.scrollTo(0, 0)"}},[this._v("Go to top")])])}]},bt=a("VU/8")(gt,ft,!1,null,null,null).exports,_t={name:"CartDetail",components:{OkCancelPopup:q},data:function(){return{id:"",accountId:"",totalPrice:0,address:"",email:"",phoneNumber:"",products:[],confirm:0,billImgUrl:"https://vignette.wikia.nocookie.net/simpsons/images/6/60/No_Image_Available.png/revision/latest?cb=20170219125728",date:0,minute:0,hour:0,day:0,month:0,year:0,popup:{isActive:!1,onOk:function(){}},cancelPopup:{isActive:!1},previewImgSrc:null,imgType:"",disabledPopupOk:!1,disabledCancelPopupOk:!1,disableConfirm:!1,disableUnconfirm:!1}},computed:p()({},Object(h.d)({permissionLevel:function(t){return t.account.permissionLevel}})),methods:p()({},Object(h.c)({alert:"alert/show"}),{onConfirm:function(){var t=this;this.disableConfirm=!0,this.PostText("/api/cart/confirm",this.id).then(this.ResponseMatch(function(e){t.updateClient(),t.disableConfirm=!1},function(e){t.alert({title:"Failed",msg:"Please refresh and try again"}),t.disableConfirm=!1}))},onUnconfirm:function(){var t=this;this.disableUnconfirm=!0,this.PostText("/api/cart/unconfirmed",this.id).then(this.ResponseMatch(function(e){t.updateClient(),t.disableUnconfirm=!1},function(e){t.alert({title:"Failed",msg:"Please refresh and try again"}),t.disableUnconfirm=!1}))},cancel:function(){this.cancelPopup.isActive=!0},cancelPopupOnOk:function(){var t=this;return l()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.disabledCancelPopupOk=!0,e.next=3,x.WaitValue(t.permissionLevel);case 3:a=e.sent,t.PostText("/api/cart/cancel"+(1==a?"FromUser":""),""+t.id).then(t.ResponseMatch(function(e){return t.$router.replace("/carts")},function(e){t.alert({title:"Failed",msg:"Please refresh and try again"}),t.disabledCancelPopupOk=!1}));case 5:case"end":return e.stop()}},e,t)}))()},cancelPopupOnCancel:function(){this.cancelPopup.isActive=!1},sendBillImage:function(){var t=this;this.disabledPopupOk=!0;var e=new FormData(uploadBillForm);e.append("imageType",this.imgType),this.PostFormData("/api/cart/updateBillImg/"+this.id,e).then(this.ResponseMatch(function(e){t.alert({title:"Success",msg:"Uploaded"}),t.updateClient(),t.popupOnCancel(),t.disabledPopupOk=!1},function(e){t.alert({title:"Failed",msg:"Please refresh and try again"}),t.disabledPopupOk=!1}))},onSelectedImg:function(t){var e=t.target.files[0];this.previewImgSrc=window.URL.createObjectURL(e),this.imgType=e.type},popupOnCancel:function(){this.popup.isActive=!1,this.previewImgSrc=null,this.imgType=""},uploadBill:function(){this.popup.isActive=!0,this.popup.onOk=this.sendBillImage},updateClient:function(){var t=this;return l()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.ChangeRouteIfPermissionLevel(function(t){return t<1}),e.next=3,x.WaitValue(t.permissionLevel);case 3:a=e.sent,t.Get("/api/cart/get"+(1==a?"FromUser":"")+"/"+t.$route.params.cartId.replace(/\s+/g,"")).then(t.ResponseMatch(function(e){return e.json().then(function(e){a>1&&t.Get("/api/account/get/"+e.accountId).then(t.ResponseMatch(function(e){return e.json().then(function(e){return t.phoneNumber=e.phoneNumber})})),t.id=e.id,t.accountId=e.accountId,t.email=e.email,t.totalPrice=e.totalPrice,t.confirm=e.confirm,t.address=e.address,t.products=e.products,t.billImgUrl=""===e.billImgUrl?"https://vignette.wikia.nocookie.net/simpsons/images/6/60/No_Image_Available.png/revision/latest?cb=20170219125728":e.billImgUrl;var i=new Date(e.date);t.minute=i.getMinutes(),t.hour=i.getHours(),t.day=i.getDate(),t.month=i.getMonth()+1,t.year=i.getFullYear()})},function(e){return t.$router.replace("/")}));case 5:case"end":return e.stop()}},e,t)}))()}}),created:function(){window.scrollTo(0,0),this.updateClient()}},Ct={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("OkCancelPopup",{attrs:{isActive:t.cancelPopup.isActive,title:"Cancel cart",onOk:t.cancelPopupOnOk,onCancel:t.cancelPopupOnCancel,disabledOk:t.disabledCancelPopupOk}},[a("p",[t._v("Do you want to cancel this cart")])]),t._v(" "),a("OkCancelPopup",{attrs:{isActive:t.popup.isActive,title:"Bill image",onOk:t.popup.onOk,onCancel:t.popupOnCancel,disabledOk:t.disabledPopupOk}},[a("div",{attrs:{align:"center"}},[a("img",{staticStyle:{"max-width":"300px","max-height":"300px"},attrs:{src:t.previewImgSrc}})]),t._v(" "),a("form",{attrs:{id:"uploadBillForm"}},[a("div",{staticClass:"file"},[a("label",{staticClass:"file-label"},[a("input",{staticClass:"file-input",attrs:{name:"image",type:"file",accept:"image/*"},on:{change:t.onSelectedImg}}),t._v(" "),a("span",{staticClass:"file-cta"},[a("span",{staticClass:"file-icon"},[a("i",{staticClass:"fas fa-upload"})]),t._v(" "),a("span",{staticClass:"file-label"},[t._v("Choose a file…")])])])])])]),t._v(" "),a("div",{staticClass:"box"},[a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("button",{staticClass:"button is-info",attrs:{type:"button"},on:{click:t.updateClient}},[t._v("Refresh")])])]),t._v(" "),1==t.permissionLevel.data&&Math.abs(t.confirm)<.5?a("div",{staticClass:"level-right"},[a("div",{staticClass:"level-item"},[a("button",{staticClass:"button is-info",staticStyle:{"margin-right":"10px"},attrs:{type:"button"},on:{click:t.uploadBill}},[t._v("Upload Bill")]),t._v(" "),a("button",{staticClass:"button is-danger",attrs:{type:"button"},on:{click:t.cancel}},[t._v("Cancel")])])]):t._e(),t._v(" "),t.permissionLevel.data>1?a("div",{staticClass:"level-right"},[a("div",{staticClass:"level-item"},[Math.abs(t.confirm)<.5?a("button",{staticClass:"button is-info",staticStyle:{"margin-right":"10px"},attrs:{type:"button",disabled:t.disableConfirm},on:{click:t.onConfirm}},[t._v("Confirm")]):a("button",{staticClass:"button is-info",staticStyle:{"margin-right":"10px"},attrs:{type:"button",disabled:t.disableUnconfirm},on:{click:t.onUnconfirm}},[t._v("Unconfirm")]),t._v(" "),a("button",{staticClass:"button is-danger",attrs:{type:"button"},on:{click:t.cancel}},[t._v("Cancel")])])]):t._e()])]),t._v(" "),a("p",{staticClass:"title",attrs:{align:"center"}},[t._v("Bill image")]),t._v(" "),a("img",{staticStyle:{display:"block",margin:"auto"},attrs:{src:t.billImgUrl}}),t._v(" "),a("div",{staticClass:"box"},[a("table",{staticClass:"table is-bordered is-narrow"},[a("col",{attrs:{"max-width":"100%"}}),t._v(" "),a("col",{attrs:{width:"100%"}}),t._v(" "),a("tr",[a("td",[t._v("ID")]),t._v(" "),a("td",{staticStyle:{"word-break":"break-all"}},[t._v(t._s(t.id))])]),t._v(" "),t.permissionLevel.data>1?a("tr",[a("td",{staticStyle:{"white-space":"nowrap"}},[t._v("Account ID")]),t._v(" "),a("td",{staticStyle:{"word-break":"break-all"}},[t._v(t._s(t.accountId))])]):t._e(),t._v(" "),t.permissionLevel.data>1?a("tr",[a("td",[t._v("Email")]),t._v(" "),a("td",[t._v(t._s(t.email))])]):t._e(),t._v(" "),t.permissionLevel.data>1?a("tr",[a("td",{staticStyle:{"white-space":"nowrap"}},[t._v("Phone Number")]),t._v(" "),a("td",[t._v(t._s(t.phoneNumber))])]):t._e(),t._v(" "),a("tr",[a("td",{staticStyle:{"white-space":"nowrap"}},[t._v("Total Price (Bath)")]),t._v(" "),a("td",[t._v(t._s(t.totalPrice))])]),t._v(" "),a("tr",[a("td",[t._v("Comfirmed")]),t._v(" "),a("td",[t._v(t._s(Math.abs(t.confirm)>.5?"Yes":"No"))])]),t._v(" "),a("tr",[a("td",[t._v("Address")]),t._v(" "),a("td",[t._v(t._s(t.address))])]),t._v(" "),a("tr",[a("td",[t._v("Date")]),t._v(" "),a("td",[t._v(t._s(t.day+"/"+t.month+"/"+t.year+" - "+t.hour+":"+(t.minute<10?"0"+t.minute:t.minute)))])])]),t._v(" "),a("p",{staticClass:"title",attrs:{align:"center"}},[t._v("Products")]),t._v(" "),t._l(t.products,function(e){return a("a",{attrs:{href:"/#/productDetail/"+e.productId}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"box",staticStyle:{"background-color":"hsl(0, 0%, 86%)"}},[a("table",{staticClass:"table is-bordered is-narrow"},[a("col",{attrs:{"max-width":"100%"}}),t._v(" "),a("col",{attrs:{width:"100%"}}),t._v(" "),a("tr",[a("td",[t._v("ID")]),t._v(" "),a("td",{staticStyle:{"word-break":"break-all"}},[t._v(t._s(e.productId))])]),t._v(" "),a("tr",[a("td",[t._v("Name")]),t._v(" "),a("td",[t._v(t._s(e.productName))])]),t._v(" "),a("tr",[a("td",[t._v("Amount")]),t._v(" "),a("td",[t._v(t._s(e.amount))])]),t._v(" "),a("tr",[a("td",[t._v("Price (Bath)")]),t._v(" "),a("td",[t._v(t._s(e.price))])])])])])])})],2)],1)},staticRenderFns:[]},kt=a("VU/8")(_t,Ct,!1,null,null,null).exports,yt={name:"MinimumStock",data:function(){return{products:[],itemPerPage:10,pageInput:"1",totalPage:1,currentPage:1}},methods:p()({},Object(h.c)({setMinimumStockNoti:"notification/minimumStock",setHideMinimumStock:"notification/hideMinimumStock"}),{refresh:function(){this.currentPage=Number(this.pageInput),this.updateClient()},previousPage:function(){this.currentPage--,this.pageInput=String(this.currentPage),this.updateClient()},nextPage:function(){this.currentPage++,this.pageInput=String(this.currentPage),this.updateClient()},validatePossitiveNumber:function(t){if(""===this[t])this[t]="1";else if("pageInput"===t){Number(this.pageInput)>this.totalPage&&(this.pageInput=String(this.totalPage))}},validatePossitiveNumberOnKeyup:function(t){this[t]=this.ValidatePossitiveNumberOnKeyup(this[t])},remove:function(t){var e=this;this.DeleteText("/api/minimumStock/delete",t).then(this.ResponseMatch(function(t){e.updateClient()}))},countPage:function(){var t=this;this.Get("/api/minimumStock/count",{cache:"reload"}).then(this.ResponseMatch(function(e){return e.json().then(function(e){0===e?(t.setHideMinimumStock(!0),t.$router.replace("/")):(t.totalPage=Math.floor((e-1)/t.itemPerPage)+1,t.totalPage<1&&(t.totalPage=1))})}))},updateClient:function(){var t=this;this.ChangeRouteIfPermissionLevel(function(t){return t<2}),this.setMinimumStockNoti(!1),this.countPage(),this.Get("/api/minimumStock/search/"+(this.currentPage-1)*this.itemPerPage+"/"+this.itemPerPage).then(this.ResponseMatch(function(e){return e.json().then(function(e){return t.products=e})}))}}),created:function(){window.scrollTo(0,0),this.updateClient()}},Pt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"box"},[a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("div",{staticClass:"level-item"},[a("button",{staticClass:"button is-info",attrs:{type:"button"},on:{click:t.refresh}},[t._v("Refresh")])])]),t._v(" "),a("div",{staticClass:"level-right"},[a("div",{staticClass:"level-item"},[a("label",{staticClass:"label",staticStyle:{"margin-right":"10px"}},[t._v("Page ("+t._s(t.totalPage)+")")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pageInput,expression:"pageInput"}],staticClass:"input",staticStyle:{"margin-right":"10px",width:"70px","text-align":"right"},attrs:{type:"text"},domProps:{value:t.pageInput},on:{keyup:function(e){t.validatePossitiveNumberOnKeyup("pageInput")},focusout:function(e){t.validatePossitiveNumber("pageInput")},input:function(e){e.target.composing||(t.pageInput=e.target.value)}}}),t._v(" "),a("button",{staticClass:"button is-link",staticStyle:{"margin-right":"10px"},attrs:{type:"button",disabled:1===t.currentPage},on:{click:t.previousPage}},[t._v("Previous")]),t._v(" "),a("button",{staticClass:"button is-link",staticStyle:{"margin-right":"10px"},attrs:{type:"button",disabled:t.currentPage===t.totalPage},on:{click:t.nextPage}},[t._v("Next")])])])])]),t._v(" "),a("div",{staticClass:"box"},[t._l(t.products,function(e){return a("div",{staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"box",staticStyle:{display:"flex","flex-wrap":"wrap","background-color":"hsl(0, 0%, 86%)"}},[a("div",{staticStyle:{"margin-right":"10px","margin-bottom":"10px","flex-grow":"1"}},[a("a",{attrs:{href:"/#/productDetail/"+e.id}},[a("table",{staticClass:"table is-bordered is-narrow"},[a("col",{attrs:{"max-width":"100%"}}),t._v(" "),a("col",{attrs:{width:"100%"}}),t._v(" "),a("tr",[a("td",[t._v("ID")]),t._v(" "),a("td",{staticStyle:{"word-break":"break-all"}},[t._v(t._s(e.id))])]),t._v(" "),a("tr",[a("td",[t._v("Name")]),t._v(" "),a("td",[t._v(t._s(e.name))])]),t._v(" "),a("tr",[a("td",[t._v("Amount")]),t._v(" "),a("td",[t._v(t._s(e.amount))])]),t._v(" "),a("tr",[a("td",{staticStyle:{"white-space":"nowrap"}},[t._v("Minimum Stock")]),t._v(" "),a("td",[t._v(t._s(e.minimumStock))])])])])]),t._v(" "),a("div",[a("div",{attrs:{align:"center"}},[a("button",{staticClass:"button is-danger",staticStyle:{"margin-bottom":"10px",width:"83px"},attrs:{type:"button"},on:{click:function(a){t.remove(e.id)}}},[t._v("Remove")])])])])])}),t._v(" "),t._m(0)],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{align:"center"}},[e("button",{staticClass:"button is-link",staticStyle:{"margin-bottom":"20px"},attrs:{type:"button",onclick:"window.scrollTo(0, 0)"}},[this._v("Go to top")])])}]},xt=a("VU/8")(yt,Pt,!1,null,null,null).exports;v.a.use(M.a);var St=new M.a({routes:[{path:"/",name:"Home",component:L},{path:"/find",name:"Find",component:j},{path:"/account",name:"Account",component:ut},{path:"/cart",name:"Cart",component:pt},{path:"/carts",name:"Carts",component:bt},{path:"/employees",name:"Employees",component:rt},{path:"/about",name:"About",component:B},{path:"/minimumStock",name:"MinimumStock",component:xt},{path:"/howTo",name:"HowTo",component:W},{path:"/addProduct",name:"AddProduct",component:J},{path:"/productDetail/:productId",name:"ProductDetail",component:it},{path:"/cartDetail/:cartId",name:"CartDetail",component:kt}]}),At={namespaced:!0,state:{isActive:!1,title:"",msg:""},mutations:{show:function(t,e){var a=e.title,i=e.msg;t.title=a,t.msg=i,t.isActive=!0},close:function(t){t.isActive=!1,t.title="",t.msg=""}}},wt={namespaced:!0,state:{permissionLevel:new x.WaitedValue(0),info:new x.WaitedValue},mutations:{permissionLevel:function(t,e){var a=e.status,i=e.value;t.permissionLevel.setStatus(a,i)},info:function(t,e){var a=e.status,i=e.value,s=t.info.data;null!==s&&(i.id=s.id,i.email=s.email),t.info.setStatus(a,i)}},actions:{update:function(t,e){var a=t.commit;e.Get("/api/auth/permissionLevel",{cache:"reload"}).then(e.ResponseMatch(function(t){return t.json().then(function(t){a("permissionLevel",{status:!0,value:t}),1==t?e.Get("/api/account",{cache:"reload"}).then(e.ResponseMatch(function(t){return t.json().then(function(t){return a("info",{status:!0,value:t})})}),function(t){a("info",{status:!1,value:t}),e.LogError(t)}):a("info",{status:!1,value:"Client is not loggin"})})},function(t){a("permissionLevel",{status:!1,value:t}),e.LogError(t)}))}}},It={namespaced:!0,state:{search:"",tags:[],page:1},mutations:{search:function(t,e){t.search=e},tags:function(t,e){t.tags=e},addTag:function(t,e){t.tags.push(e)},removeTag:function(t,e){t.tags.splice(e,1)},page:function(t,e){t.page=e}}},Nt={namespaced:!0,state:{products:[]},mutations:{set:function(t,e){t.products=e},addItem:function(t,e){t.products.push(e)},setAmount:function(t,e){var a=e.index,i=e.value;t.products[a].amount=i},removeItem:function(t,e){t.products.splice(e,1)},removeItemFromId:function(t,e){for(var a=t.products,i=a.length,s=0;s<i;s++)if(a[s].id===e){a.splice(s,1);break}},addAmount:function(t,e){var a=e.index,i=e.value;t.products[a].amount+=i},updateFromJson:function(t,e){for(var a=t.products,i=a.length,s=0;s<i;s++){var n=a[s];if(n.id===e.id){n.name=e.name,n.price=e.price,n.maxAmount=e.amount,0===e.amount&&this.commit("cart/removeItem",s);break}}}},actions:{update:function(t,e){for(var a=t.commit,i=t.state,s=e.self,n=e.onComplete,o=i.products,r=o.length,c=0,l=function(t){var e=o[t].id;s.Get("/api/product/"+e,{cache:"reload"}).then(s.ResponseMatch(function(t){return t.json().then(function(t){a("updateFromJson",t),c++})},function(t){a("removeItemFromId",e),c++}))},u=0;u<r;u++)l(u);x.WaitUntil(function(){return c===r},function(){sessionStorage.setItem("cart",d()(i.products)),n()})}}},Ot={namespaced:!0,state:{mode:0,pageMode:[{pageInput:"1",totalPage:1,currentPage:1},{pageInput:"1",totalPage:1,currentPage:1},{pageInput:"1",totalPage:1,currentPage:1}]},mutations:{mode:function(t,e){t.mode=e},pageInput:function(t,e){var a=e.index,i=e.value;t.pageMode[a].pageInput=i},totalPage:function(t,e){var a=e.index,i=e.value;t.pageMode[a].totalPage=i},currentPage:function(t,e){var a=e.index,i=e.value;t.pageMode[a].currentPage=i}}},Dt={namespaced:!0,state:{minimumStock:!1,hideMinimumStock:!1,carts:!1,cart:!1},mutations:{minimumStock:function(t,e){t.minimumStock=e},hideMinimumStock:function(t,e){t.hideMinimumStock=e},cart:function(t,e){t.cart=e},carts:function(t,e){t.carts=e}}};v.a.use(h.a);var Tt=new h.a.Store({modules:{alert:At,account:wt,home:It,cart:Nt,carts:Ot,notification:Dt},strict:!1});v.a.config.productionTip=!1,v.a.mixin({methods:{LogError:function(t){console.log("Error",t.status,t.statusText,t.url)},ShowError:function(){alert("Error")},ResponseMatch:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.LogError;return function(a){return a.status>=200&&a.status<300?t(a):e(a)}},FetchData:function(t,e,a,i,s){return fetch(e,p()({method:t,credentials:"same-origin",headers:{"Content-Type":a},body:i},s))},FetchFormData:function(t,e,a,i){return fetch(e,p()({method:t,credentials:"same-origin",body:a},i))},Get:function(t,e){return fetch(t,p()({credentials:"same-origin"},e))},PostData:function(t,e,a,i){return this.FetchData("POST",t,e,a,i)},PostText:function(t,e,a){return this.FetchData("POST",t,"text/plain",e,a)},PostJson:function(t,e,a){return this.PostData(t,"application/json",d()(e),a)},PostFormData:function(t,e,a){return this.FetchFormData("POST",t,e,a)},PutData:function(t,e,a,i){return this.FetchData("PUT",t,e,a,i)},PutText:function(t,e,a){return this.FetchData("PUT",t,"text/plain",e,a)},PutJson:function(t,e,a){return this.PutData(t,"application/json",d()(e),a)},PutFormData:function(t,e,a){return this.FetchFormData("PUT",t,e,a)},Delete:function(t,e){return fetch(t,p()({method:"DELETE",credentials:"same-origin"},e))},DeleteData:function(t,e,a,i){return this.FetchData("DELETE",t,e,a,i)},DeleteText:function(t,e,a){return this.FetchData("DELETE",t,"text/plain",e,a)},DeleteJson:function(t,e,a){return this.DeleteData(t,"application/json",d()(e),a)},ChangeRouteIfPermissionLevel:function(t){var e=this;return l()(r.a.mark(function a(){var i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,x.WaitValue(e.$store.state.account.permissionLevel);case 3:i=a.sent,t(i)&&e.$router.replace("/"),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),t(0)&&e.$router.replace("/");case 10:case"end":return a.stop()}},a,e,[[0,7]])}))()},ValidatePhoneNumber:function(t){"-"===(t=(t=t.replace(/[^\d|-]/g,"")).replace(/-(-)+/g,"-")).charAt(0)&&(t=t.substring(1));var e=t.length-1;return"-"===t.charAt(e)&&(t=t.substring(0,e)),t},ValidateNonNagativeNumber:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";if(0===t.length)return e;if(0===(t=t.replace(/\D/g,"")).length)return e;for(var a=0,i=!1;a<t.length;a++)if("0"!==t.charAt(a)){i=!0;break}return i?0===a?t:t.substring(a):"0"},ValidatePossitiveNumber:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",a=this.ValidateNonNagativeNumber(t,e);return"0"==a?e:a},ValidatePossitiveNumberOnKeyup:function(t){var e=this.ValidateNonNagativeNumber(t,"");return"0"==e?"":e},ValidateAndAddTag:function(t,e,a){""!==(t=t.replace(/[^\w|\s]/g,"").trim().replace(/\s+/g,"_").toLowerCase())&&"_"!==t&&void 0===e.find(function(e){return e===t})&&a(t)},IsEmailFormat:function(t){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}}});new v.a({el:"#app",components:{App:T},template:"<App/>",router:St,store:Tt})},oeVK:function(t,e){},vqTe:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.fa15ed6927d59fcac40e.js.map